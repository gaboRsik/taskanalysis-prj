<div class="container mt-4">
  <div class="row">
    <div class="col-lg-8 offset-lg-2">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>
          <i class="bi bi-folder me-2"></i>
          Categories
        </h2>
      </div>

      <!-- Create Category -->
      <div class="card mb-4">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0">
            <i class="bi bi-plus-circle me-2"></i>
            Create New Category
          </h5>
        </div>
        <div class="card-body">
          <div class="input-group">
            <input 
              type="text" 
              class="form-control" 
              [(ngModel)]="newCategoryName" 
              placeholder="Category name"
              (keyup.enter)="createCategory()"
            />
            <button 
              class="btn btn-success" 
              (click)="createCategory()"
              [disabled]="!newCategoryName.trim()"
            >
              <i class="bi bi-plus-lg me-1"></i>
              Create
            </button>
          </div>
        </div>
      </div>

      <!-- Categories List -->
      <div class="card">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0">
            <i class="bi bi-list-ul me-2"></i>
            All Categories
          </h5>
          <span class="badge bg-light text-dark">{{ categories.length }}</span>
        </div>
        <div class="card-body">
          <div *ngIf="categories.length === 0" class="alert alert-info">
            <i class="bi bi-info-circle me-2"></i>
            No categories yet. Create your first category to organize your tasks!
          </div>

          <div class="list-group">
            <div 
              *ngFor="let category of categories" 
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              <div *ngIf="editingCategory?.id !== category.id" class="flex-grow-1">
                <i class="bi bi-folder-fill me-2 text-primary"></i>
                <strong>{{ category.name }}</strong>
                <small class="text-muted ms-2">
                  Created: {{ category.createdAt | date:'short' }}
                </small>
              </div>

              <div *ngIf="editingCategory?.id === category.id" class="flex-grow-1">
                <div class="input-group">
                  <input 
                    type="text" 
                    class="form-control" 
                    [(ngModel)]="editCategoryName"
                    (keyup.enter)="updateCategory()"
                  />
                  <button class="btn btn-success btn-sm" (click)="updateCategory()">
                    <i class="bi bi-check-lg"></i>
                  </button>
                  <button class="btn btn-secondary btn-sm" (click)="cancelEdit()">
                    <i class="bi bi-x-lg"></i>
                  </button>
                </div>
              </div>

              <div *ngIf="editingCategory?.id !== category.id" class="btn-group">
                <button 
                  class="btn btn-sm btn-outline-primary" 
                  (click)="startEdit(category)"
                  title="Edit category"
                >
                  <i class="bi bi-pencil"></i>
                </button>
                <button 
                  class="btn btn-sm btn-outline-danger" 
                  (click)="deleteCategory(category.id)"
                  title="Delete category"
                >
                  <i class="bi bi-trash"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
